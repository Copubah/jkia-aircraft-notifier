JKIA Aircraft Landing Notifier - Architecture Diagram
====================================================

                    ┌─────────────────────────────────────────────────────────────┐
                    │                      AWS CLOUD                             │
                    │                                                             │
    ┌───────────────┼─────────────────────────────────────────────────────────────┼───────────────┐
    │               │                                                             │               │
    │   ┌───────────▼──────────┐              ┌─────────────────────────────────▼─────────────┐ │
    │   │     EventBridge      │              │              Lambda Function                   │ │
    │   │                      │              │                                                │ │
    │   │  ┌─────────────────┐ │              │  ┌──────────────────────────────────────────┐ │ │
    │   │  │ Scheduled Rule  │ │──────────────┼─▶│        jkia-landing-notifier             │ │ │
    │   │  │                 │ │   Triggers   │  │                                          │ │ │
    │   │  │ rate(5 minutes) │ │   every      │  │  • Fetch aircraft data from OpenSky     │ │ │
    │   │  └─────────────────┘ │   5 minutes  │  │  • Filter aircraft near JKIA            │ │ │
    │   └─────────────────────┘              │  │  • Detect landing patterns               │ │ │
    │                                        │  │  • Send notifications via SNS            │ │ │
    │                                        │  └──────────────────────────────────────────┘ │ │
    │                                        └─────────────────────────────────────────────────┘ │
    │                                                           │                                 │
    │                                                           │ HTTPS API Call                  │
    │                                                           ▼                                 │
    │   ┌─────────────────────────────────────────────────────────────────────────────────────┐ │
    │   │                          EXTERNAL SERVICE                                           │ │
    │   │                                                                                     │ │
    │   │  ┌─────────────────────────────────────────────────────────────────────────────┐  │ │
    │   │  │                    OpenSky Network API                                      │  │ │
    │   │  │                                                                             │  │ │
    │   │  │  • Real-time aircraft position data                                        │  │ │
    │   │  │  • Global flight tracking                                                  │  │ │
    │   │  │  • Free tier available                                                     │  │ │
    │   │  │  • Returns: position, altitude, velocity, ground status                   │  │ │
    │   │  └─────────────────────────────────────────────────────────────────────────────┘  │ │
    │   └─────────────────────────────────────────────────────────────────────────────────────┘ │
    │                                                           │                                 │
    │                                                           │ Returns JSON data               │
    │                                                           ▼                                 │
    │   ┌─────────────────────────────────────────────────────────────────────────────────────┐ │
    │   │                        NOTIFICATION SERVICE                                         │ │
    │   │                                                                                     │ │
    │   │  ┌─────────────────────────────────────────────────────────────────────────────┐  │ │
    │   │  │                         Amazon SNS                                          │  │ │
    │   │  │                                                                             │  │ │
    │   │  │  ┌─────────────────┐              ┌─────────────────────────────────────┐  │  │ │
    │   │  │  │   SNS Topic     │              │         Email Subscription          │  │  │ │
    │   │  │  │                 │──────────────┼─▶                                   │  │  │ │
    │   │  │  │ jkia-aircraft-  │   Delivers   │  • Protocol: email                  │  │  │ │
    │   │  │  │    landing      │   messages   │  • Endpoint: user@example.com       │  │  │ │
    │   │  │  └─────────────────┘              │  • Status: Confirmed                │  │  │ │
    │   │  │                                   └─────────────────────────────────────┘  │  │ │
    │   │  └─────────────────────────────────────────────────────────────────────────────┘  │ │
    │   └─────────────────────────────────────────────────────────────────────────────────────┘ │
    │                                                           │                                 │
    │                                                           │ Email notification              │
    │                                                           ▼                                 │
    └───────────────────────────────────────────────────────────────────────────────────────────┘
                                                                │
                                                                ▼
                                            ┌─────────────────────────────────┐
                                            │           END USER              │
                                            │                                 │
                                            │  📧 Receives email notification │
                                            │     when aircraft land at JKIA │
                                            └─────────────────────────────────┘

FLOW DESCRIPTION:
================

1. ⏰ TRIGGER (Every 5 minutes)
   EventBridge scheduled rule triggers Lambda function

2. 🔍 DATA COLLECTION
   Lambda function calls OpenSky Network API with JKIA coordinates
   API returns real-time aircraft position data

3. 🛬 LANDING DETECTION
   Lambda analyzes aircraft data:
   - Filters aircraft within JKIA area
   - Checks altitude (< 100m) and ground status
   - Identifies recently landed aircraft

4. 📧 NOTIFICATION
   If landings detected:
   - Lambda publishes message to SNS topic
   - SNS delivers email to subscribed user
   - Email contains flight details and landing info

5. 📊 MONITORING
   All activities logged to CloudWatch for debugging and monitoring

TECHNICAL SPECIFICATIONS:
========================

EventBridge Rule:
- Name: jkia-landing-check
- Schedule: rate(5 minutes)
- Target: Lambda function

Lambda Function:
- Name: jkia-landing-notifier
- Runtime: Python 3.12
- Memory: 128 MB
- Timeout: 30 seconds
- Triggers: EventBridge

OpenSky Network API:
- Endpoint: https://opensky-network.org/api/states/all
- Method: GET
- Parameters: Bounding box around JKIA
- Rate Limits: Free tier limitations

SNS Topic:
- Name: jkia-aircraft-landing
- Type: Standard
- Subscription: Email protocol
- Delivery: Immediate

COST BREAKDOWN:
==============
- Lambda: ~$0.20/month (8,640 invocations)
- SNS: ~$0.50/month (variable notifications)
- EventBridge: Free tier
- CloudWatch Logs: ~$0.10/month
- Total: ~$0.80/month

SECURITY:
=========
- IAM roles with least-privilege access
- HTTPS encryption for all API calls
- No sensitive data in environment variables
- Email notifications contain no sensitive information